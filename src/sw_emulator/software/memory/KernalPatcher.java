/**
 * @(#)KernalPatcher.java 1999/10/18
 *
 * ICE Team Free Software Group
 *
 * This file is part of C64 Java Software Emulator.
 * See README for copyright notice.
 *
 *  This program is free software; you can redistribute it and/or modify
 *  it under the terms of the GNU General Public License as published by
 *  the Free Software Foundation; either version 2 of the License, or
 *  (at your option) any later version.
 *
 *  This program is distributed in the hope that it will be useful,
 *  but WITHOUT ANY WARRANTY; without even the implied warranty of
 *  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 *  GNU General Public License for more details.
 *
 *  You should have received a copy of the GNU General Public License
 *  along with this program; if not, write to the Free Software
 *  Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA
 *  02111-1307  USA.
 */

package sw_emulator.software.memory;

import sw_emulator.hardware.memory.ROM;

/**
 * Patch the kernal of C64 for many purpose:
 * Change kernal revision: R1, R2, R3, SX-64 or DX-64, 4096 aka Pet64 aka
 * Educator 64
 *
 * Note: all the changes that this class makes is done to the passed Rom image.
 *
 * @author Ice
 * @version 1.00 18/10/1999
 */
public class KernalPatcher {

  /**
   * A reference to the actual kernal ROM image
   */
  protected ROM kernal;

  private Patch revE119=new Patch(0xE119, new byte[][]{
    {(byte)0xC9, (byte)0xFF},
    {(byte)0xAD, (byte)0xE4},
    {(byte)0xAD, (byte)0xE4},
    {(byte)0xAD, (byte)0xE4},
    {(byte)0xAD, (byte)0xE4}
  });

  private Patch revE42D=new Patch(0xE42D, new byte[][]{
    {0x20, 0x1E, (byte)0xAB},
    {0x20, 0x1E, (byte)0xAB},
    {0x20, 0x1E, (byte)0xAB},
    {0x20, 0x1E, (byte)0xAB},
    {0x4C, 0x41, (byte)0xE4}
  });

  private Patch revE477=new Patch(0xE477, new byte[][]{
    {0x20, 0x20, 0x2A, 0x2A, 0x2A, 0x2A, 0x20, 0x43, 0x4F, 0x4D, 0x4D, 0x4F,
           0x44, 0x4F, 0x52, 0x45, 0x20, 0x36, 0x34, 0x20, 0x42, 0x41, 0x53,
           0x49, 0x43, 0x20, 0x56, 0x32, 0x20, 0x2A, 0x2A, 0x2A, 0x2A, 0x0D,
           0x0D, 0x20, 0x36, 0x34, 0x4B, 0x20, 0x52, 0x41, 0x4D, 0x20, 0x53,
           0x59, 0x53, 0x54, 0x45, 0x4D, 0x20, 0x20, 0x00, 0x2B},
    {0x20, 0x20, 0x2A, 0x2A, 0x2A, 0x2A, 0x20, 0x43, 0x4F, 0x4D, 0x4D, 0x4F,
           0x44, 0x4F, 0x52, 0x45, 0x20, 0x36, 0x34, 0x20, 0x42, 0x41, 0x53,
           0x49, 0x43, 0x20, 0x56, 0x32, 0x20, 0x2A, 0x2A, 0x2A, 0x2A, 0x0D,
           0x0D, 0x20, 0x36, 0x34, 0x4B, 0x20, 0x52, 0x41, 0x4D, 0x20, 0x53,
           0x59, 0x53, 0x54, 0x45, 0x4D, 0x20, 0x20, 0x00, 0x5C},
    {0x20, 0x20, 0x2A, 0x2A, 0x2A, 0x2A, 0x20, 0x43, 0x4F, 0x4D, 0x4D, 0x4F,
           0x44, 0x4F, 0x52, 0x45, 0x20, 0x36, 0x34, 0x20, 0x42, 0x41, 0x53,
           0x49, 0x43, 0x20, 0x56, 0x32, 0x20, 0x2A, 0x2A, 0x2A, 0x2A, 0x0D,
           0x0D, 0x20, 0x36, 0x34, 0x4B, 0x20, 0x52, 0x41, 0x4D, 0x20, 0x53,
           0x59, 0x53, 0x54, 0x45, 0x4D, 0x20, 0x20, 0x00, (byte)0x81},
    {0x20, 0x20, 0x20, 0x2A, 0x2A, 0x2A, 0x2A, 0x2A, 0x20, 0x20, 0x53, 0x58,
           0x2D, 0x36, 0x34, 0x20, 0x42, 0x41, 0x53, 0x49, 0x43, 0x20, 0x56,
           0x32, 0x2E, 0x30, 0x20, 0x20, 0x2A, 0x2A, 0x2A, 0x2A, 0x2A, 0x0D,
           0x0D, 0x20, 0x36, 0x34, 0x4B, 0x20, 0x52, 0x41, 0x4D, 0x20, 0x53,
           0x59, 0x53, 0x54, 0x45, 0x4D, 0x20, 0x20, 0x00, (byte)0xB3},
    {0x2A, 0x2A, 0x2A, 0x2A, 0x20, 0x43, 0x4F, 0x4D, 0x4D, 0x4F, 0x44, 0x4F,
           0x52, 0x45, 0x20, 0x34, 0x30, 0x36, 0x34, 0x20, 0x20, 0x42, 0x41,
           0x53, 0x49, 0x43, 0x20, 0x56, 0x32, 0x2E, 0x30, 0x20, 0x2A, 0x2A,
           0x2A, 0x2A, 0x0D, 0x0D, 0x00, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20,
           0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x63}
  });

  private Patch revE4AD=new Patch(0xE4AD, new byte[][]{
    {(byte)0xAA, (byte)0xAA, (byte)0xAA, (byte)0xAA, (byte)0xAA, (byte)0xAA,
                 (byte)0xAA, (byte)0xAA, (byte)0xAA, (byte)0xAA},
    {0x48, 0x20, (byte)0xC9, (byte)0xFF, (byte)0xAA, 0x68, (byte)0x90, 0x01,
           (byte)0x8A, 0x60},
    {0x48, 0x20, (byte)0xC9, (byte)0xFF, (byte)0xAA, 0x68, (byte)0x90, 0x01,
           (byte)0x8A, 0x60},
    {0x48, 0x20, (byte)0xC9, (byte)0xFF, (byte)0xAA, 0x68, (byte)0x90, 0x01,
           (byte)0x8A, 0x60},
    {0x48, 0x20, (byte)0xC9, (byte)0xFF, (byte)0xAA, 0x68, (byte)0x90, 0x01,
           (byte)0x8A, 0x60},
  });

  private Patch revE4C8=new Patch(0xE4C8, new byte[][]{
    {(byte)0xAA, (byte)0xAA, (byte)0xAA, (byte)0xAA, (byte)0xAA, (byte)0xAA,
                 (byte)0xAA, (byte)0xAA, (byte)0xAA, (byte)0xAA, (byte)0xAA,
                 (byte)0xAA, (byte)0xAA, (byte)0xAA, (byte)0xAA, (byte)0xAA,
                 (byte)0xAA, (byte)0xAA, (byte)0xAA, (byte)0xAA, (byte)0xAA,
                 (byte)0xAA, (byte)0xAA, (byte)0xAA, (byte)0xAA, (byte)0xAA,
                 (byte)0xAA, (byte)0xAA, (byte)0xAA, (byte)0xAA, (byte)0xAA,
                 (byte)0xAA, (byte)0xAA, (byte)0xAA, (byte)0xAA, (byte)0xAA,
                 (byte)0xAA, (byte)0xAA, (byte)0xAA, (byte)0xAA, (byte)0xAA,
                 (byte)0xAA, (byte)0xAA, (byte)0xAA, (byte)0xAA, (byte)0xAA,
                 (byte)0xAA, (byte)0xAA, (byte)0xAA, (byte)0xAA, (byte)0xAA,
                 (byte)0xAA, (byte)0xAA, (byte)0xAA, (byte)0xAA, (byte)0xAA},
    {(byte)0xAA, (byte)0xAA, (byte)0xAA, (byte)0xAA, (byte)0xAA, (byte)0xAA,
                 (byte)0xAA, (byte)0xAA, (byte)0xAA, (byte)0xAA, (byte)0xAA,
                 (byte)0xAA, (byte)0xAA, (byte)0xAA, (byte)0xAA, (byte)0xAA,
                 (byte)0xAA, (byte)0xAA, (byte)0xAD, 0x21, (byte)0xD0,
                 (byte)0x91, (byte)0xF3, 0x60, 0x69, 0x02, (byte)0xA4,
                 (byte)0x91, (byte)0xC8, (byte)0xD0, 0x04, (byte)0xC5,
                 (byte)0xA1, (byte)0xD0, (byte)0xF7, 0x60, 0x19, 0x26,
                 0x44, 0x19, 0x1A, 0x11, (byte)0xE8, 0x0D, 0x70, 0x0C, 0x06,
                 0x06, (byte)0xD1, 0x02, 0x37, 0x01, (byte)0xAE, 0x00, 0x69,
                 0x00},
	  {(byte)0xAA, (byte)0xAA, (byte)0xAA, (byte)0xAA, (byte)0xAA, (byte)0xAA,
                 (byte)0xAA, (byte)0xAA, (byte)0xAA, (byte)0xAA, (byte)0xAA,
                 (byte)0x85, (byte)0xA9, (byte)0xA9, 0x01, (byte)0x85,
                 (byte)0xAB, 0x60, (byte)0xAD, (byte)0x86, 0x02, (byte)0x91,
                 (byte)0xF3, 0x60, 0x69, 0x02, (byte)0xA4, (byte)0x91,
                 (byte)0xC8, (byte)0xD0, 0x04, (byte)0xC5, (byte)0xA1,
                 (byte)0xD0, (byte)0xF7, 0x60, 0x19, 0x26, 0x44, 0x19,
                 0x1A, 0x11, (byte)0xE8, 0x0D, 0x70, 0x0C, 0x06, 0x06,
                 (byte)0xD1, 0x02, 0x37, 0x01, (byte)0xAE, 0x00, 0x69, 0x00},
    {(byte)0xAA, (byte)0xAA, (byte)0xAA, (byte)0xAA, (byte)0xAA, (byte)0xAA,
                 (byte)0xAA, (byte)0xAA, (byte)0xAA, (byte)0xAA, (byte)0xAA,
                 (byte)0x85, (byte)0xA9, (byte)0xA9, 0x01, (byte)0x85,
                 (byte)0xAB, 0x60, (byte)0xAD, (byte)0x86, 0x02, (byte)0x91,
                 (byte)0xF3, 0x60, 0x69, 0x02, (byte)0xA4, (byte)0x91,
                 (byte)0xC8, (byte)0xD0, 0x04, (byte)0xC5, (byte)0xA1,
                 (byte)0xD0, (byte)0xF7, 0x60, 0x19, 0x26, 0x44, 0x19, 0x1A,
                 0x11, (byte)0xE8, 0x0D, 0x70, 0x0C, 0x06, 0x06, (byte)0xD1,
                 0x02, 0x37, 0x01, (byte)0xAE, 0x00, 0x69, 0x00},
    {0x2C, (byte)0x86, 0x02, 0x30, 0x0A, (byte)0xA9, 0x00, (byte)0xA2, 0x0E,
           (byte)0x9D, 0x20, (byte)0xD0, (byte)0xCA, 0x10, (byte)0xFA, 0x4C,
           (byte)0x87, (byte)0xEA, (byte)0xAD, 0x21, (byte)0xD0, (byte)0x91,
           (byte)0xF3, 0x60, 0x69, 0x02, (byte)0xA4, (byte)0x91, (byte)0xC8,
           (byte)0xD0, 0x04, (byte)0xC5, (byte)0xA1, (byte)0xD0, (byte)0xF7,
           0x60, 0x19, 0x26, 0x44, 0x19, 0x1A, 0x11, (byte)0xE8, 0x0D, 0x70,
           0x0C, 0x06, 0x06, (byte)0xD1, 0x02, 0x37, 0x01, (byte)0xAE, 0x00,
           0x69, 0x00}
  });

  private Patch revE535=new Patch(0xE535, new byte[][]{
    {0x0E},
    {0x0E},
	  {0x0E},
	  {0x06},
	  {0x01}
  });

  private Patch revE57C=new Patch(0xE57C, new byte[][]{
    {(byte)0xB5, (byte)0xD9, 0x29, 0x03, 0x0D, (byte)0x88, 0x02, (byte)0x85,
                 (byte)0xD2, (byte)0xBD, (byte)0xF0, (byte)0xEC, (byte)0x85,
                 (byte)0xD1, (byte)0xA9, 0x27, (byte)0xE8, (byte)0xB4,
                 (byte)0xD9, 0x30, 0x06, 0x18, 0x69, 0x28, (byte)0xE8, 0x10,
                 (byte)0xF6, (byte)0x85, (byte)0xD5, 0x60},
    {(byte)0xB5, (byte)0xD9, 0x29, 0x03, 0x0D, (byte)0x88, 0x02, (byte)0x85,
                 (byte)0xD2, (byte)0xBD, (byte)0xF0, (byte)0xEC, (byte)0x85,
                 (byte)0xD1, (byte)0xA9, 0x27, (byte)0xE8, (byte)0xB4,
                 (byte)0xD9, 0x30, 0x06, 0x18, 0x69, 0x28, (byte)0xE8, 0x10,
                 (byte)0xF6, (byte)0x85, (byte)0xD5, 0x60},
    {0x20, (byte)0xF0, (byte)0xE9, (byte)0xA9, 0x27, (byte)0xE8, (byte)0xB4,
           (byte)0xD9, 0x30, 0x06, 0x18, 0x69, 0x28, (byte)0xE8, 0x10,
           (byte)0xF6, (byte)0x85, (byte)0xD5, 0x4C, 0x24, (byte)0xEA,
           (byte)0xE4, (byte)0xC9, (byte)0xF0, 0x03, 0x4C, (byte)0xED,
           (byte)0xE6, 0x60, (byte)0xEA},
    {0x20, (byte)0xF0, (byte)0xE9, (byte)0xA9, 0x27, (byte)0xE8, (byte)0xB4,
           (byte)0xD9, 0x30, 0x06, 0x18, 0x69, 0x28, (byte)0xE8, 0x10,
           (byte)0xF6, (byte)0x85, (byte)0xD5, 0x4C, 0x24, (byte)0xEA,
           (byte)0xE4, (byte)0xC9, (byte)0xF0, 0x03, 0x4C, (byte)0xED,
           (byte)0xE6, 0x60, (byte)0xEA},
    {0x20, (byte)0xF0, (byte)0xE9, (byte)0xA9, 0x27, (byte)0xE8, (byte)0xB4,
           (byte)0xD9, 0x30, 0x06, 0x18, 0x69, 0x28, (byte)0xE8, 0x10,
           (byte)0xF6, (byte)0x85, (byte)0xD5, 0x4C, 0x24, (byte)0xEA,
           (byte)0xE4, (byte)0xC9, (byte)0xF0, 0x03, 0x4C, (byte)0xED,
           (byte)0xE6, 0x60, (byte)0xEA}
  });

  private Patch revE5EF=new Patch(0xE5EF, new byte[][]{
    {0x09},
    {0x09},
    {0x09},
    {0x0F},
    {0x09}
  });

  private Patch revE5F4=new Patch(0xE5F4, new byte[][]{
    {(byte)0xE6, (byte)0xEC},
    {(byte)0xE6, (byte)0xEC},
    {(byte)0xE6, (byte)0xEC},
    {(byte)0xD7, (byte)0xF0},
    {(byte)0xE6, (byte)0xEC}
  });

  private Patch revE622=new Patch(0xE622, new byte[][]{
    {(byte)0xED, (byte)0xE6},
    {(byte)0xED, (byte)0xE6},
    {(byte)0x91, (byte)0xE5},
    {(byte)0x91, (byte)0xE5},
    {(byte)0x91, (byte)0xE5}
  });

  private Patch revEA07=new Patch(0xEA07, new byte[][]{
    {(byte)0xA9, 0x20, (byte)0x91, (byte)0xD1, (byte)0xA9, 0x01, (byte)0x91,
                 (byte)0xF3, (byte)0x88, 0x10, (byte)0xF5, 0x60},
    {(byte)0xA9, 0x20, (byte)0x91, (byte)0xD1, 0x20, (byte)0xDA, (byte)0xE4,
                (byte)0xEA, (byte)0x88, 0x10, (byte)0xF5, 0x60},
    {0x20, (byte)0xDA, (byte)0xE4, (byte)0xA9, 0x20, (byte)0x91, (byte)0xD1,
           (byte)0x88, 0x10, (byte)0xF6, 0x60, (byte)0xEA},
    {0x20, (byte)0xDA, (byte)0xE4, (byte)0xA9, 0x20, (byte)0x91, (byte)0xD1,
           (byte)0x88, 0x10, (byte)0xF6, 0x60, (byte)0xEA},
    {(byte)0xA9, 0x20, (byte)0x91, (byte)0xD1, 0x20, (byte)0xDA, (byte)0xE4,
                 (byte)0xEA, (byte)0x88, 0x10, (byte)0xF5, 0x60}
  });

  private Patch revECCA=new Patch(0xECCA, new byte[][]{
    {0x1B, 0x00},
    {(byte)0x9B, 0x37},
    {(byte)0x9B, 0x37},
    {(byte)0x9B, 0x37},
    {(byte)0x9B, 0x37}
  });

  private Patch revECD2=new Patch(0xECD2, new byte[][]{
    {0x00},
    {0x0F},
    {0x0F},
    {0x0F},
    {0x0F}
  });

  private Patch revECD9=new Patch(0xECD9, new byte[][]{
    {0x0E, 0x06, 0x01, 0x02, 0x03, 0x04, 0x00, 0x01, 0x02, 0x03, 0x04, 0x05,
           0x06, 0x07},
    {0x0E, 0x06, 0x01, 0x02, 0x03, 0x04, 0x00, 0x01, 0x02, 0x03, 0x04, 0x05,
           0x06, 0x07},
    {0x0E, 0x06, 0x01, 0x02, 0x03, 0x04, 0x00, 0x01, 0x02, 0x03, 0x04, 0x05,
           0x06, 0x07},
    {0x03, 0x01, 0x01, 0x02, 0x03, 0x04, 0x00, 0x01, 0x02, 0x03, 0x04, 0x05,
           0x06, 0x07},
    {0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
           0x00, 0x00}
  });

  private Patch revEF94=new Patch(0xEF94, new byte[][]{
    {(byte)0x85, (byte)0xA9, 0x60},
    {(byte)0x85, (byte)0xA9, 0x60},
    {0x4C, (byte)0xD3, (byte)0xE4},
    {0x4C, (byte)0xD4, (byte)0xE4},
    {(byte)0x85, (byte)0xA9, 0x60}
  });

  private Patch revF0D8=new Patch(0xF0D8, new byte[][]{
    {0x0D, 0x50, 0x52, 0x45, 0x53, 0x53, 0x20, 0x50, 0x4C, 0x41, 0x59, 0x20,
           0x4F, 0x4E, 0x20},
    {0x0D, 0x50, 0x52, 0x45, 0x53, 0x53, 0x20, 0x50, 0x4C, 0x41, 0x59, 0x20,
           0x4F, 0x4E, 0x20},
    {0x0D, 0x50, 0x52, 0x45, 0x53, 0x53, 0x20, 0x50, 0x4C, 0x41, 0x59, 0x20,
           0x4F, 0x4E, 0x20},
    {0x4C, 0x4F, 0x41, 0x44, 0x22, 0x3A, 0x2A, 0x22, 0x2C, 0x38, 0x0D, 0x52,
           0x55, 0x4E, 0x0D},
    {0x0D, 0x50, 0x52, 0x45, 0x53, 0x53, 0x20, 0x50, 0x4C, 0x41, 0x59, 0x20,
           0x4F, 0x4E, 0x20}
  });

  private Patch revF387=new Patch(0xF387, new byte[][]{
    {0x03},
    {0x03},
    {0x03},
    {0x08},
    {0x03}
  });

  private Patch revF428=new Patch(0xF428, new byte[][]{
    {(byte)0xD0, 0x0B, (byte)0xAD, (byte)0x95, 0x02, 0x0A, (byte)0xA8,
                 (byte)0xAD, (byte)0x96, 0x02, 0x4C, 0x3F, (byte)0xF4, 0x0A,
                 (byte)0xAA, (byte)0xBD, (byte)0xC0, (byte)0xFE, 0x0A,
                 (byte)0xA8, (byte)0xBD, (byte)0xC1, (byte)0xFE, 0x2A, 0x48,
                 (byte)0x98, 0x69, (byte)0xC8, (byte)0x8D, (byte)0x99, 0x02,
                 0x68, 0x69, 0x00, (byte)0x8D, (byte)0x9A, 0x02},
    {(byte)0xF0, 0x1C, 0x0A, (byte)0xAA, (byte)0xAD, (byte)0xA6, 0x02,
                 (byte)0xD0, 0x09, (byte)0xBC, (byte)0xC1, (byte)0xFE,
                 (byte)0xBD, (byte)0xC0, (byte)0xFE, 0x4C, 0x40, (byte)0xF4,
                 (byte)0xBC, (byte)0xEB, (byte)0xE4, (byte)0xBD, (byte)0xEA,
                 (byte)0xE4, (byte)0x8C, (byte)0x96, 0x02, (byte)0x8D,
                 (byte)0x95, 0x02, (byte)0xAD, (byte)0x95, 0x02, 0x0A, 0x20,
                 0x2E, (byte)0xFF},
    {(byte)0xF0, 0x1C, 0x0A, (byte)0xAA, (byte)0xAD, (byte)0xA6, 0x02,
                 (byte)0xD0, 0x09, (byte)0xBC, (byte)0xC1, (byte)0xFE,
                 (byte)0xBD, (byte)0xC0, (byte)0xFE, 0x4C, 0x40, (byte)0xF4,
                 (byte)0xBC, (byte)0xEB, (byte)0xE4, (byte)0xBD, (byte)0xEA,
                 (byte)0xE4, (byte)0x8C, (byte)0x96, 0x02, (byte)0x8D,
                 (byte)0x95, 0x02, (byte)0xAD, (byte)0x95, 0x02, 0x0A, 0x20,
                 0x2E, (byte)0xFF},
    {(byte)0xF0, 0x1C, 0x0A, (byte)0xAA, (byte)0xAD, (byte)0xA6, 0x02,
                 (byte)0xD0, 0x09, (byte)0xBC, (byte)0xC1, (byte)0xFE,
                 (byte)0xBD, (byte)0xC0, (byte)0xFE, 0x4C, 0x40, (byte)0xF4,
                 (byte)0xBC, (byte)0xEB, (byte)0xE4, (byte)0xBD, (byte)0xEA,
                 (byte)0xE4, (byte)0x8C, (byte)0x96, 0x02, (byte)0x8D,
                 (byte)0x95, 0x02, (byte)0xAD, (byte)0x95, 0x02, 0x0A, 0x20,
                 0x2E, (byte)0xFF},
    {(byte)0xF0, 0x1C, 0x0A, (byte)0xAA, (byte)0xAD, (byte)0xA6, 0x02,
                 (byte)0xD0, 0x09, (byte)0xBC, (byte)0xC1, (byte)0xFE,
                 (byte)0xBD, (byte)0xC0, (byte)0xFE, 0x4C, 0x40, (byte)0xF4,
                 (byte)0xBC, (byte)0xEB, (byte)0xE4, (byte)0xBD, (byte)0xEA,
                 (byte)0xE4, (byte)0x8C, (byte)0x96, 0x02, (byte)0x8D,
                 (byte)0x95, 0x02, (byte)0xAD, (byte)0x95, 0x02, 0x0A, 0x20,
                 0x2E, (byte)0xFF}
  });

  private Patch revF459=new Patch(0xF459, new byte[][]{
    {0x4C},
    {0x20},
    {0x20},
    {0x20},
    {0x20}
  });

  private Patch revF4B7=new Patch(0xF4B7, new byte[][]{
    {0x7B},
    {0x7B},
    {0x7B},
    {(byte)0xF7},
    {0x7B}
  });

  private Patch revF5F9=new Patch(0xF5F9, new byte[][]{
    {0x5F},
    {0x5F},
    {0x5F},
    {(byte)0xF7},
    {0x5F}
  });

  private Patch revF81F=new Patch(0xF81F, new byte[][]{
    {0x2F},
    {0x2F},
    {0x2F},
    {0x2B}
  });

  private Patch revF762=new Patch(0xF762, new byte[][]{
    {(byte)0x91, (byte)0xC9, (byte)0xFF, (byte)0xF0, (byte)0xFA},
    {(byte)0xA1, 0x20, (byte)0xE0, (byte)0xE4, (byte)0xEA},
    {(byte)0xA1, 0x20, (byte)0xE0, (byte)0xE4, (byte)0xEA},
    {(byte)0xA1, 0x20, (byte)0xE0, (byte)0xE4, (byte)0xEA},
    {(byte)0xA1, 0x20, (byte)0xE0, (byte)0xE4, (byte)0xEA}
  });

  private Patch revF81C=new Patch(0xF81C, new byte[][]{
    {0x2F},
    {0x2F},
    {0x2F},
    {0x2F},
    {0x2B},
  });


  private Patch revF82C=new Patch(0xF82C, new byte[][]{
    {0x2F},
    {0x2F},
    {0x2F},
    {0x2F},
    {0x2B},
  });

  private Patch revFCFC=new Patch(0xFCFC, new byte[][]{
    {0x18, (byte)0xE5},
    {0x5B, (byte)0xFF},
    {0x5B, (byte)0xFF},
    {0x5B, (byte)0xFF},
    {0x5B, (byte)0xFF}
  });

  private Patch revFDDD=new Patch(0xFDDD, new byte[][]{
    {(byte)0xA9, 0x1B, (byte)0x8D, 0x04, (byte)0xDC, (byte)0xA9, 0x41,
                 (byte)0x8D, 0x05, (byte)0xDC, (byte)0xA9, (byte)0x81,
                 (byte)0x8D, 0x0D, (byte)0xDC, (byte)0xAD, 0x0E, (byte)0xDC,
                 0x29, (byte)0x80, 0x09, 0x11, (byte)0x8D, 0x0E, (byte)0xDC,
                 0x4C, (byte)0x8E, (byte)0xEE},
    {(byte)0xAD, (byte)0xA6, 0x02, (byte)0xF0, 0x0A, (byte)0xA9, 0x25,
                 (byte)0x8D, 0x04, (byte)0xDC, (byte)0xA9, 0x40, 0x4C,
                 (byte)0xF3, (byte)0xFD, (byte)0xA9, (byte)0x95, (byte)0x8D,
                 0x04, (byte)0xDC, (byte)0xA9, 0x42, (byte)0x8D, 0x05,
                 (byte)0xDC, 0x4C, 0x6E, (byte)0xFF},
    {(byte)0xAD, (byte)0xA6, 0x02, (byte)0xF0, 0x0A, (byte)0xA9, 0x25,
                 (byte)0x8D, 0x04, (byte)0xDC, (byte)0xA9, 0x40, 0x4C,
                 (byte)0xF3, (byte)0xFD, (byte)0xA9, (byte)0x95, (byte)0x8D,
                 0x04, (byte)0xDC, (byte)0xA9, 0x42, (byte)0x8D, 0x05,
                 (byte)0xDC, 0x4C, 0x6E, (byte)0xFF},
    {(byte)0xAD, (byte)0xA6, 0x02, (byte)0xF0, 0x0A, (byte)0xA9, 0x25,
                 (byte)0x8D, 0x04, (byte)0xDC, (byte)0xA9, 0x40, 0x4C,
                 (byte)0xF3, (byte)0xFD, (byte)0xA9, (byte)0x95, (byte)0x8D,
                 0x04, (byte)0xDC, (byte)0xA9, 0x42, (byte)0x8D, 0x05,
                 (byte)0xDC, 0x4C, 0x6E, (byte)0xFF},
    {(byte)0xAD, (byte)0xA6, 0x02, (byte)0xF0, 0x0A, (byte)0xA9, 0x25,
                 (byte)0x8D, 0x04, (byte)0xDC, (byte)0xA9, 0x40, 0x4C,
                 (byte)0xF3, (byte)0xFD, (byte)0xA9, (byte)0x95, (byte)0x8D,
                 0x04, (byte)0xDC, (byte)0xA9, 0x42, (byte)0x8D, 0x05,
                 (byte)0xDC, 0x4C, 0x6E, (byte)0xFF}
  });

  private Patch revFEC2=new Patch(0xFEC2, new byte[][]{
    {(byte)0xAC, 0x26, (byte)0xA7, 0x19, 0x5D, 0x11, 0x1F, 0x0E, (byte)0xA1,
                 0x0C, 0x1F, 0x06, (byte)0xDD, 0x02, 0x3D, 0x01, (byte)0xB2,
                 0x00, 0x6C},
    {(byte)0xC1, 0x27, 0x3E, 0x1A, (byte)0xC5, 0x11, 0x74, 0x0E, (byte)0xED,
                 0x0C, 0x45, 0x06, (byte)0xF0, 0x02, 0x46, 0x01, (byte)0xB8,
                 0x00, 0x71},
    {(byte)0xC1, 0x27, 0x3E, 0x1A, (byte)0xC5, 0x11, 0x74, 0x0E, (byte)0xED,
                 0x0C, 0x45, 0x06, (byte)0xF0, 0x02, 0x46, 0x01, (byte)0xB8,
                 0x00, 0x71},
    {(byte)0xC1, 0x27, 0x3E, 0x1A, (byte)0xC5, 0x11, 0x74, 0x0E, (byte)0xED,
                 0x0C, 0x45, 0x06, (byte)0xF0, 0x02, 0x46, 0x01, (byte)0xB8,
                 0x00, 0x71},
    {(byte)0xC1, 0x27, 0x3E, 0x1A, (byte)0xC5, 0x11, 0x74, 0x0E, (byte)0xED,
                 0x0C, 0x45, 0x06, (byte)0xF0, 0x02, 0x46, 0x01, (byte)0xB8,
                 0x00, 0x71}
  });

  private Patch revFF08=new Patch(0xFF08, new byte[][]{
    {(byte)0x93, 0x02, 0x29, 0x0F, (byte)0xD0, 0x0C, (byte)0xAD, (byte)0x95,
                 0x02, (byte)0x8D, 0x06, (byte)0xDD, (byte)0xAD, (byte)0x96,
                 0x02, 0x4C, 0x25, (byte)0xFF, 0x0A, (byte)0xAA, (byte)0xBD,
                 (byte)0xC0, (byte)0xFE, (byte)0x8D, 0x06, (byte)0xDD,
                 (byte)0xBD, (byte)0xC1, (byte)0xFE, (byte)0x8D, 0x07,
                 (byte)0xDD, (byte)0xA9, 0x11, (byte)0x8D, 0x0F, (byte)0xDD,
                 (byte)0xA9, 0x12, 0x4D, (byte)0xA1, 0x02, (byte)0x8D,
                 (byte)0xA1, 0x02, (byte)0xA9, (byte)0xFF, (byte)0x8D, 0x06,
                 (byte)0xDD, (byte)0x8D, 0x07, (byte)0xDD, (byte)0xAE,
                 (byte)0x98, 0x02, (byte)0x86, (byte)0xA8, 0x60},
    {(byte)0x95, 0x02, (byte)0x8D, 0x06, (byte)0xDD, (byte)0xAD, (byte)0x96,
                 0x02, (byte)0x8D, 0x07, (byte)0xDD, (byte)0xA9, 0x11,
                 (byte)0x8D, 0x0F, (byte)0xDD, (byte)0xA9, 0x12, 0x4D,
                 (byte)0xA1, 0x02, (byte)0x8D, (byte)0xA1, 0x02, (byte)0xA9,
                 (byte)0xFF, (byte)0x8D, 0x06, (byte)0xDD, (byte)0x8D, 0x07,
                 (byte)0xDD, (byte)0xAE, (byte)0x98, 0x02, (byte)0x86,
                 (byte)0xA8, 0x60, (byte)0xAA, (byte)0xAD, (byte)0x96, 0x02,
                 0x2A, (byte)0xA8, (byte)0x8A, 0x69, (byte)0xC8, (byte)0x8D,
                 (byte)0x99, 0x02, (byte)0x98, 0x69, 0x00, (byte)0x8D,
                 (byte)0x9A, 0x02, 0x60, (byte)0xEA, (byte)0xEA},
    {(byte)0x95, 0x02, (byte)0x8D, 0x06, (byte)0xDD, (byte)0xAD, (byte)0x96,
                 0x02, (byte)0x8D, 0x07, (byte)0xDD, (byte)0xA9, 0x11,
                 (byte)0x8D, 0x0F, (byte)0xDD, (byte)0xA9, 0x12, 0x4D,
                 (byte)0xA1, 0x02, (byte)0x8D, (byte)0xA1, 0x02, (byte)0xA9,
                 (byte)0xFF, (byte)0x8D, 0x06, (byte)0xDD, (byte)0x8D, 0x07,
                 (byte)0xDD, (byte)0xAE, (byte)0x98, 0x02, (byte)0x86,
                 (byte)0xA8, 0x60, (byte)0xAA, (byte)0xAD, (byte)0x96, 0x02,
                 0x2A, (byte)0xA8, (byte)0x8A, 0x69, (byte)0xC8, (byte)0x8D,
                 (byte)0x99, 0x02, (byte)0x98, 0x69, 0x00, (byte)0x8D,
                 (byte)0x9A, 0x02, 0x60, (byte)0xEA, (byte)0xEA},
    {(byte)0x95, 0x02, (byte)0x8D, 0x06, (byte)0xDD, (byte)0xAD, (byte)0x96,
                 0x02, (byte)0x8D, 0x07, (byte)0xDD, (byte)0xA9, 0x11,
                 (byte)0x8D, 0x0F, (byte)0xDD, (byte)0xA9, 0x12, 0x4D,
                 (byte)0xA1, 0x02, (byte)0x8D, (byte)0xA1, 0x02, (byte)0xA9,
                 (byte)0xFF, (byte)0x8D, 0x06, (byte)0xDD, (byte)0x8D, 0x07,
                 (byte)0xDD, (byte)0xAE, (byte)0x98, 0x02, (byte)0x86,
                 (byte)0xA8, 0x60, (byte)0xAA, (byte)0xAD, (byte)0x96, 0x02,
                 0x2A, (byte)0xA8, (byte)0x8A, 0x69, (byte)0xC8, (byte)0x8D,
                 (byte)0x99, 0x02, (byte)0x98, 0x69, 0x00, (byte)0x8D,
                 (byte)0x9A, 0x02, 0x60, (byte)0xEA, (byte)0xEA},
    {(byte)0x95, 0x02, (byte)0x8D, 0x06, (byte)0xDD, (byte)0xAD, (byte)0x96,
                 0x02, (byte)0x8D, 0x07, (byte)0xDD, (byte)0xA9, 0x11,
                 (byte)0x8D, 0x0F, (byte)0xDD, (byte)0xA9, 0x12, 0x4D,
                 (byte)0xA1, 0x02, (byte)0x8D, (byte)0xA1, 0x02, (byte)0xA9,
                 (byte)0xFF, (byte)0x8D, 0x06, (byte)0xDD, (byte)0x8D, 0x07,
                 (byte)0xDD, (byte)0xAE, (byte)0x98, 0x02, (byte)0x86,
                 (byte)0xA8, 0x60, (byte)0xAA, (byte)0xAD, (byte)0x96, 0x02,
                 0x2A, (byte)0xA8, (byte)0x8A, 0x69, (byte)0xC8, (byte)0x8D,
                 (byte)0x99, 0x02, (byte)0x98, 0x69, 0x00, (byte)0x8D,
                 (byte)0x9A, 0x02, 0x60, (byte)0xEA, (byte)0xEA}
  });

  private Patch  revFF5B=new Patch(0xFF5B, new byte[][]{
    {(byte)0xAA, (byte)0xAA, (byte)0xAA, (byte)0xAA, (byte)0xAA, (byte)0xAA,
                 (byte)0xAA, (byte)0xAA, (byte)0xAA, (byte)0xAA, (byte)0xAA,
                 (byte)0xAA, (byte)0xAA, (byte)0xAA, (byte)0xAA, (byte)0xAA,
                 (byte)0xAA, (byte)0xAA, (byte)0xAA, (byte)0xAA, (byte)0xAA,
                 (byte)0xAA, (byte)0xAA, (byte)0xAA, (byte)0xAA, (byte)0xAA,
                 (byte)0xAA, (byte)0xAA, (byte)0xAA, (byte)0xAA, (byte)0xAA,
                 (byte)0xAA, (byte)0xAA, (byte)0xAA, (byte)0xAA, (byte)0xAA,
                 (byte)0xAA},
    {0x20, 0x18, (byte)0xE5, (byte)0xAD, 0x12, (byte)0xD0, (byte)0xD0,
           (byte)0xFB, (byte)0xAD, 0x19, (byte)0xD0, 0x29, 0x01, (byte)0x8D,
           (byte)0xA6, 0x02, 0x4C, (byte)0xDD, (byte)0xFD, (byte)0xA9,
           (byte)0x81, (byte)0x8D, 0x0D, (byte)0xDC, (byte)0xAD, 0x0E,
           (byte)0xDC, 0x29, (byte)0x80, 0x09, 0x11, (byte)0x8D, 0x0E,
           (byte)0xDC, 0x4C, (byte)0x8E, (byte)0xEE},
    {0x20, 0x18, (byte)0xE5, (byte)0xAD, 0x12, (byte)0xD0, (byte)0xD0,
           (byte)0xFB, (byte)0xAD, 0x19, (byte)0xD0, 0x29, 0x01, (byte)0x8D,
           (byte)0xA6, 0x02, 0x4C, (byte)0xDD, (byte)0xFD, (byte)0xA9,
           (byte)0x81, (byte)0x8D, 0x0D, (byte)0xDC, (byte)0xAD, 0x0E,
           (byte)0xDC, 0x29, (byte)0x80, 0x09, 0x11, (byte)0x8D, 0x0E,
           (byte)0xDC, 0x4C, (byte)0x8E, (byte)0xEE},
    {0x20, 0x18, (byte)0xE5, (byte)0xAD, 0x12, (byte)0xD0, (byte)0xD0,
           (byte)0xFB, (byte)0xAD, 0x19, (byte)0xD0, 0x29, 0x01, (byte)0x8D,
           (byte)0xA6, 0x02, 0x4C, (byte)0xDD, (byte)0xFD, (byte)0xA9,
           (byte)0x81, (byte)0x8D, 0x0D, (byte)0xDC, (byte)0xAD, 0x0E,
           (byte)0xDC, 0x29, (byte)0x80, 0x09, 0x11, (byte)0x8D, 0x0E,
           (byte)0xDC, 0x4C, (byte)0x8E, (byte)0xEE},
    {0x20, 0x18, (byte)0xE5, (byte)0xAD, 0x12, (byte)0xD0, (byte)0xD0,
           (byte)0xFB, (byte)0xAD, 0x19, (byte)0xD0, 0x29, 0x01, (byte)0x8D,
           (byte)0xA6, 0x02, 0x4C, (byte)0xDD, (byte)0xFD, (byte)0xA9,
           (byte)0x81, (byte)0x8D, 0x0D, (byte)0xDC, (byte)0xAD, 0x0E,
           (byte)0xDC, 0x29, (byte)0x80, 0x09, 0x11, (byte)0x8D, 0x0E,
           (byte)0xDC, 0x4C, (byte)0x8E, (byte)0xEE}
  });

  private Patch revFF80=new Patch(0xFF80, new byte[][]{
    {(byte)0xAA},
    {0x00},
    {0x03},
    {0x43},
    {0x64}
  });

  private Patch revFF82=new Patch(0xFF82, new byte[][]{
    {0x18, (byte)0xE5},
    {0x5B, (byte)0xFF},
    {0x5B, (byte)0xFF},
    {0x5B, (byte)0xFF},
    {0x5B, (byte)0xFF}
  });

  private Patch revFFF8=new Patch(0xFFF8, new byte[][]{
    {0x42, 0x59},
    {0x42, 0x59},
    {0x42, 0x59},
    {0x42, 0x59},
    {0x00, 0x00}
  });

  /**
   * Construct the kernal patcher with the actual ROM image.
   *
   * @param kernal the actual ROM image
   */
  public KernalPatcher(ROM kernal) {
    this.kernal=kernal;
  }

  /**
   * Use a Kernal revision.
   * Available revision are:
   * <code>index</code>=0 Kernal R1 (rev $AA)
   * <code>index</code>=1 Kernal R2 (rev $00)
   * <code>index</code>=2 Kernal R3 (rev $03)
   * <code>index</code>=3 Kernal SX-64/DX-64 (rev $43)
   * <code>index</code>=4 Kernal 4096 aka Pet 64 aka Educator 64 (rev $64)
   *
   * @param index the index for choosing revision
   */
  public void useRevision(byte index) {
    revE119.usePatch(index, kernal);
    revE42D.usePatch(index, kernal);
    revE477.usePatch(index, kernal);
    revE4AD.usePatch(index, kernal);
    revE4C8.usePatch(index, kernal);
    revE535.usePatch(index, kernal);
    revE57C.usePatch(index, kernal);
    revE5EF.usePatch(index, kernal);
    revE5F4.usePatch(index, kernal);
    revE622.usePatch(index, kernal);
    revEA07.usePatch(index, kernal);
    revECCA.usePatch(index, kernal);
    revECD2.usePatch(index, kernal);
    revECD9.usePatch(index, kernal);
    revEF94.usePatch(index, kernal);
    revF0D8.usePatch(index, kernal);
    revF387.usePatch(index, kernal);
    revF428.usePatch(index, kernal);
    revF459.usePatch(index, kernal);
    revF4B7.usePatch(index, kernal);
    revF5F9.usePatch(index, kernal);
    revF762.usePatch(index, kernal);
    revF81C.usePatch(index, kernal);
    revF81F.usePatch(index, kernal);
    revF82C.usePatch(index, kernal);
    revFCFC.usePatch(index, kernal);
    revFDDD.usePatch(index, kernal);
    revFEC2.usePatch(index, kernal);
    revFF08.usePatch(index, kernal);
    revFF80.usePatch(index, kernal);
    revFF82.usePatch(index, kernal);
    revFFF8.usePatch(index, kernal);
  }
}